var WebSocket = require('..').Client,
    deflate   = require('permessage-deflate'),
    pace      = require('pace');

var host    = 'ws://localhost:9001',
    agent   = encodeURIComponent('node-' + process.version),
    cases   = 0,
    options = {extensions: [deflate]};

var socket = new WebSocket(host + '/getCaseCount'),
    url, progress;

socket.onmessage = function(event) {
  console.log('Total cases to run: ' + event.data);
  cases = parseInt(event.data);
  progress = pace(cases);
};

var runCase = f